<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil do Usuário</title>
  <link rel="stylesheet" href="/v3/style.css"> <!-- Caminho para seu CSS -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
</head>
<body onload="carregarPerfil()">
  <div class="container">
    <h1>Perfil do Usuário</h1>
    <div id="lista-treinos"></div>
  </div>

  <script>


const firebaseConfig = {
  apiKey: "AIzaSyDoDuXxhXa58BSfBtJUUItbk7s9YmlBOGo",
  authDomain: "meuprojetosaude-54d64.firebaseapp.com",
  databaseURL: "https://meuprojetosaude-54d64-default-rtdb.firebaseio.com",
  projectId: "meuprojetosaude-54d64",
  storageBucket: "meuprojetosaude-54d64.firebasestorage.app",
  messagingSenderId: "105539186714",
  appId: "1:105539186714:web:c5286a9a3f5b4bc8c161a3",
  measurementId: "G-HF1H65STC1"
};

    firebase.initializeApp(firebaseConfig);

    function carregarPerfil() {
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          const uid = user.uid;
          const lista = document.getElementById("lista-treinos");

          firebase.database().ref('treinos/' + uid).once('value')
            .then(snapshot => {
              lista.innerHTML = "";
              snapshot.forEach(child => {
                const treino = child.val();
                const div = document.createElement("div");
                div.classList.add("treino-card");
                div.innerHTML = `<h3>${treino.nome}</h3><p><strong>Data:</strong> ${treino.data}</p>`;
                treino.exercicios.forEach(ex => {
                  div.innerHTML += `
                    <div class="exercicio">
                      <p><strong>${ex.nome}</strong></p>
                      <p>${ex.series} séries de ${ex.repeticoes} repetições - ${ex.carga}kg</p>
                      <p>Observação: ${ex.observacao || "-"}</p>
                      <p>Status: ${ex.concluido ? "Concluído" : "Pendente"}</p>
                    </div>
                    <hr>`;
                });
                lista.appendChild(div);
              });
            });
        } else {
          alert("Você precisa estar logado para acessar o perfil.");
          window.location.href = "/v3/login.html"; // redireciona para login se não estiver logado
        }
      });
    }
  </script>
</body>
</html>
